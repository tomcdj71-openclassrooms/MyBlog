{% extends 'base.html.twig' %}
{% block body %}
	<section id="blog" class="blog mt-4">
		<div class="container pt-4" data-aos="fade-up">
			<div class="row">
				<div class="col-lg-8 entries">
					{% include "_partials/blog_search_filter.html.twig" %}
					{% for post in posts %}
						<article class="entry">
							<div class="entry-img">
								<img src="{{ post.featuredImage }}" alt="Illustration of the post {{ post.title }}" class="img-fluid">
							</div>
							<h2 class="entry-title">
								<a href="{{ path('blog_post', {'slug': post.slug}) }}">{{ post.title }}</a>
							</h2>
							<div class="entry-meta">
								<ul>
									<li class="d-flex align-items-center">
										<i class="bi bi-person"></i>
										<a href="{{ path('blog_author', {'username': post.author.getUsername() }) }}">
											{{ post.author.getUsername() }}</a>
									</li>
									<li class="d-flex align-items-center">
										<i class="bi bi-clock"></i>
										<a href="{{ path('blog_date', {'date': post.createdAt|date("y-m-d")}) }}">
											<time datetime="{{ post.createdAt|date("d/m/Y") }}">
												{{ post.createdAt|date("d/m/Y") }}</time>
										</a>
									</li>
									<li class="d-flex align-items-center">
										<i class="bi bi-folder"></i>
										<a href="{{ path('blog_category', {'slug': post.category.slug }) }}">{{ post.category.name }}</a>
									</li>
									<li class="d-flex align-items-center">
										<i class="bi bi-chat-dots"></i>
										<a href="{{ path('blog_post', {'slug': post.slug}) }}#comment-section">
											{{ post.comments.number_of_comments }}
											Commentaire{{ post.comments.number_of_comments > 1 ? 's' : '' }}</a>
									</li>
								</ul>
							</div>
							<div class="entry-content">
								<p>
									{{ post.chapo }}
								</p>
								<div class="read-more">
									<a href="{{ path('blog_post', {'slug': post.slug}) }}">Voir Plus</a>
								</div>
							</div>
						</article>
					{% endfor %}
					<!-- End blog entry -->
					<div class="blog-pagination">
						<ul class="justify-content-center">
							{% if totalPages is defined %}
								{% for i in 1..totalPages %}
									<li {% if i == currentPage %} class="active" {% endif %}>
										<a href="{{ path('blog') }}?page={{ i }}">{{ i }}</a>
									</li>
								{% endfor %}
							{% endif %}
						</ul>
					</div>
				</div>
				<!-- End blog entries list -->
				{% include "_partials/blog_sidebar.html.twig" %}
				<!-- End blog sidebar -->
			</div>
		</div>
	</section>
	{% block javascripts %}
		<script src="{{ asset('js/script.js') }}"></script>
	{% endblock %}
{% endblock %}
